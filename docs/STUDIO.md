# MyContext Studio

**Bundled component preview and prototyping tool for MyContext CLI**

## Overview

MyContext Studio is a Next.js application that's automatically bundled with every MyContext CLI project. It provides a visual interface for previewing, testing, and managing components generated by the CLI.

## Features

### ðŸŽ¯ Live Component Preview

- **Real-time Updates** - Components automatically appear when generated by CLI
- **Responsive Testing** - Mobile, tablet, and desktop preview modes
- **Interactive Playground** - Test components with different props and states

### ðŸ“š Component Library

- **Browse Components** - Visual grid/list view of all generated components
- **Search & Filter** - Find components by name, type, or description
- **Source Tracking** - See which components came from CLI vs Studio
- **Quality Metrics** - View responsive, accessibility, and quality scores

### ðŸ”§ Developer Tools

- **Code View** - View and copy component source code
- **Export Options** - Download components as individual files
- **Validation Status** - See which components pass quality checks
- **Usage Analytics** - Track component usage and performance

## Getting Started

### Automatic Setup

Studio is automatically set up when you initialize a new MyContext project:

```bash
# Initialize project (includes Studio)
mycontext init my-app --framework instantdb
cd my-app

# Studio is ready to use!
pnpm studio:dev
# Opens at http://localhost:3001
```

### Manual Setup (if needed)

If Studio wasn't set up automatically:

```bash
# Copy Studio from CLI bundle
cp -r node_modules/mycontext-cli/studio ./

# Install dependencies
cd studio
pnpm install

# Create environment file
echo 'NEXT_PUBLIC_CLI_COMPONENTS_PATH=../components/generated' > .env.local

# Start Studio
pnpm dev
```

## Usage

### Starting Studio

```bash
# From project root
pnpm studio:dev

# Or directly
cd studio && pnpm dev
```

### Generating Components

Studio automatically watches for new components:

```bash
# Generate components (CLI writes to studio/components/generated/)
mycontext generate:components

# Components instantly appear in Studio!
```

### Component Workflow

1. **Generate** - Use CLI to generate components
2. **Preview** - Components auto-appear in Studio
3. **Test** - Use responsive preview to test on different devices
4. **Validate** - Check quality scores and accessibility
5. **Export** - Copy code or download components

## Configuration

### Environment Variables

Create `studio/.env.local`:

```env
# Path to CLI-generated components (relative to studio/)
NEXT_PUBLIC_CLI_COMPONENTS_PATH=../components/generated

# Studio version
NEXT_PUBLIC_STUDIO_VERSION=0.1.0

# Optional: Custom port
PORT=3001
```

### Custom Paths

If your components are in a different location:

```env
# Custom path to components
NEXT_PUBLIC_CLI_COMPONENTS_PATH=../../my-other-project/components
```

## Architecture

### File Structure

```
studio/
â”œâ”€â”€ app/                    # Next.js app directory
â”‚   â””â”€â”€ (studio)/
â”‚       â”œâ”€â”€ generate/       # Component generation UI
â”‚       â”œâ”€â”€ library/        # Component library browser
â”‚       â””â”€â”€ cli-preview/    # CLI component preview
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ generated/          # CLI writes components here
â”‚   â”œâ”€â”€ studio/            # Studio-specific components
â”‚   â””â”€â”€ ui/                # shadcn/ui components
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ component-loader.ts # Load components from CLI
â”‚   â””â”€â”€ file-watcher.ts    # Watch for component changes
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ use-cli-components.ts # React hook for CLI components
â””â”€â”€ package.json
```

### Component Flow

1. **CLI Generation** - CLI writes components to `studio/components/generated/`
2. **File Watching** - Studio watches for file changes
3. **Component Loading** - Components are loaded and parsed
4. **UI Updates** - Studio UI updates in real-time
5. **User Interaction** - Users can preview, test, and export

## API Reference

### ComponentLoader

```typescript
import { ComponentLoader } from "@/lib/component-loader";

const loader = new ComponentLoader();

// Load all components
const components = await loader.loadAllComponents();

// Get component code
const code = await loader.getComponentCode("Button", "mobile");

// Search components
const results = await loader.searchComponents("button");
```

### useCLIComponents Hook

```typescript
import { useCLIComponents } from "@/hooks/use-cli-components";

function MyComponent() {
  const {
    cliComponents,
    isLoading,
    error,
    refreshComponents,
    getComponentCode,
  } = useCLIComponents();

  // Use components...
}
```

## Troubleshooting

### Studio Not Starting

```bash
# Check if dependencies are installed
cd studio && pnpm install

# Check environment variables
cat studio/.env.local

# Check if components directory exists
ls -la studio/components/generated/
```

### Components Not Appearing

1. **Check Path** - Verify `NEXT_PUBLIC_CLI_COMPONENTS_PATH` is correct
2. **Check Permissions** - Ensure Studio can read the components directory
3. **Check CLI** - Make sure CLI is writing to the correct path
4. **Check Console** - Look for errors in browser console

### Performance Issues

- **Large Component Sets** - Studio loads components on-demand
- **File Watching** - Disable if not needed: `NEXT_PUBLIC_WATCH_COMPONENTS=false`
- **Memory Usage** - Restart Studio if memory usage is high

## Development

### Running in Development

```bash
# Start Studio in development mode
cd studio
pnpm dev

# With debugging
DEBUG=* pnpm dev
```

### Building for Production

```bash
# Build Studio
cd studio
pnpm build

# Start production server
pnpm start
```

### Customizing Studio

Studio is built with:

- **Next.js 15** - React framework
- **shadcn/ui** - Component library
- **Tailwind CSS** - Styling
- **TypeScript** - Type safety

To customize:

1. Edit components in `studio/components/`
2. Modify pages in `studio/app/`
3. Update styles in `studio/app/globals.css`

## Integration with CLI

### CLI Commands

```bash
# Generate components with preview
mycontext generate:components --preview

# Generate and open Studio
mycontext generate:components --open-preview

# Generate with specific output directory
mycontext generate:components --preview-dir ./custom-path
```

### Component Manifest

CLI generates a `manifest.json` file in the components directory:

```json
{
  "version": "1.0.0",
  "generatedAt": "2024-01-01T00:00:00.000Z",
  "source": "mycontext-cli",
  "components": [
    {
      "id": "button-primary-mobile",
      "name": "Button",
      "variant": "mobile",
      "path": "Button-mobile.tsx",
      "description": "Primary button component",
      "type": "button",
      "group": "ui",
      "validation": {
        "responsive": true,
        "accessible": true,
        "touchTargets": true,
        "qualityScore": 95
      },
      "variants": ["mobile", "desktop"],
      "tags": ["button", "primary", "ui"],
      "generatedAt": "2024-01-01T00:00:00.000Z",
      "generator": "mycontext-cli"
    }
  ]
}
```

## Contributing

Studio is part of the MyContext CLI project. To contribute:

1. Fork the repository
2. Make changes to `studio/` directory
3. Test with `pnpm studio:dev`
4. Submit a pull request

## License

MIT License - see main project license.
